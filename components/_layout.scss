$layout-main-block: '.application' !default;
$layout-content-wrapper-block: 'main' !default;
$layout-content-block: '.content' !default;
$layout-sidebar-block: '.sidebar' !default;

$layout-sidebar-font-weight: $font-weight-normal !default;
$layout-sidebar-heading-font-size: $small-font-size !default;
$layout-sidebar-heading-font-weight: $font-weight-extrabold !default;

$layout-sidebar-nav-width: 260px !default;
$layout-sidebar-nav-padding: 10px !default;
$layout-sidebar-nav-link-icon-width: 36px !default;
$layout-sidebar-nav-link-icon-padding: 10px !default;
$layout-sidebar-nav-width-collapsed: $layout-sidebar-nav-link-icon-width + 2 * $layout-sidebar-nav-padding !default;
$layout-sidebar-nav-background-color: #191c1f !default;
$layout-sidebar-nav-text-color: #f2f2f2 !default;

$layout-sidebar-nav-title-background-color: lighten($layout-sidebar-nav-background-color, 5%) !default;
$layout-sidebar-nav-title-text-color: darken($layout-sidebar-nav-text-color, 50%) !default;
$layout-sidebar-nav-title-height: 40px !default;

$layout-sidebar-nav-link-height: 60px !default;

$layout-sidebar-nav-link-icon-roundness: 10px !default;
$layout-sidebar-nav-link-text-color: darken($layout-sidebar-nav-text-color, 30%) !default;

$layout-sidebar-nav-link-hover-background-color: $layout-sidebar-nav-title-background-color !default;
$layout-sidebar-nav-link-active-background-color: lighten($layout-sidebar-nav-title-background-color, 5%) !default;
$layout-sidebar-nav-link-active-text-color: $layout-sidebar-nav-text-color !default;

$layout-sidebar-include-header: true !default;
$layout-sidebar-header-block: 'header' !default;
$layout-sidebar-header-height: 60px !default;
$layout-sidebar-header-logo-height: $layout-sidebar-header-height * 0.5 !default;

$layout-sidebar-include-footer: true !default;
$layout-sidebar-footer-block: 'footer' !default;
$layout-sidebar-footer-height: 60px !default;

$layout-sidebar-nav-classes: dashboard, paint, settings !default;
$layout-sidebar-nav-icons: dashboard, paint-brush, cog !default;

$include-html-paint-layout: true !default;

%layout-sidebar-heading {
  font-size: $layout-sidebar-heading-font-size;
  font-weight: $layout-sidebar-heading-font-weight;
  text-transform: uppercase;
  letter-spacing: 1px;
}

@mixin layout-navigation-icons {
  @for $i from 1 through length($layout-sidebar-nav-classes) {
    $class-name: nth($layout-sidebar-nav-classes, $i);
    $icon-name: nth($layout-sidebar-nav-icons, $i);

    .#{$class-name} i {
      @include icon($icon-name);
    }
  }
}

@mixin layout-sidebar {
  $nav-top-margin: 0;
  $nav-bottom-margin: 0;

  @if $layout-sidebar-include-header {
    $nav-top-margin: $layout-sidebar-header-height;
  }

  @if $layout-sidebar-include-footer {
    $nav-bottom-margin: $layout-sidebar-footer-height;
  }

  #{$layout-sidebar-block} {
    background-color: $layout-sidebar-nav-background-color;
    float: left;
    height: 100%;
    position: relative;
    width: $layout-sidebar-nav-width;
    font-weight: $layout-sidebar-font-weight;

    @if $layout-sidebar-include-header {
      > #{$layout-sidebar-header-block} {
        height: $layout-sidebar-header-height;
        line-height: $layout-sidebar-header-height;
        padding: 0 $layout-sidebar-nav-padding;

        img {
          @include transition(padding, 150ms, linear);

          height: $layout-sidebar-header-logo-height;
          margin-right: $layout-sidebar-nav-padding / 2;
        }

        h1 {
          @extend %layout-sidebar-heading;

          color: $white;
          display: inline-block;
          margin: 0;
        }
      }
    }

    > nav {
      bottom: $nav-bottom-margin;
      left: 0;
      overflow-y: auto;
      position: absolute;
      right: 0;
      top: $nav-top-margin;

      header {
        background-color: $layout-sidebar-nav-title-background-color;
        color: $layout-sidebar-nav-title-text-color;
        line-height: $layout-sidebar-nav-title-height;
        padding: 0 $layout-sidebar-nav-padding;
        white-space: nowrap;

        h1 {
          @extend %layout-sidebar-heading;

          color: $layout-sidebar-nav-link-text-color;
          display: inline-block;
          margin: 0;
        }

        .toggle-collapse {
          color: $layout-sidebar-nav-link-text-color;
          display: inline-block;
          float: right;
          line-height: $layout-sidebar-nav-title-height;

          button {
            @include icon(chevron-circle-left);

            background-color: transparent;
            border-width: 0;
            margin-bottom: 0;
          }
        }
      }

      > ul {
        @include layout-navigation-icons();

        list-style-type: none;
        margin: 0;
        padding: 0;

        a {
          @include transition(background-color, 150ms, linear);

          border-bottom: 1px solid $layout-sidebar-nav-title-background-color;
          display: block;
          font-size: $base-font-size;
          line-height: $layout-sidebar-nav-link-height;
          padding: 0 $layout-sidebar-nav-padding;
          text-decoration: none;
          white-space: nowrap;

          &, &:visited {
            color: $layout-sidebar-nav-link-text-color;
          }

          &:hover {
            background-color: $layout-sidebar-nav-link-hover-background-color;
          }

          &.active {
            background-color: $layout-sidebar-nav-link-active-background-color;
            color: $layout-sidebar-nav-link-active-text-color;

            &:hover {
              background-color: lighten($layout-sidebar-nav-link-active-background-color, 5%);
              color: lighten($layout-sidebar-nav-link-active-text-color, 5%);
            }
          }
        }

        i {
          @include transition(margin, 150ms, linear);

          border-radius: $layout-sidebar-nav-link-icon-roundness;
          color: $layout-sidebar-nav-link-text-color;
          margin-right: $layout-sidebar-nav-padding;
          padding: $layout-sidebar-nav-link-icon-padding 0;
          text-align: center;
          width: $layout-sidebar-nav-link-icon-width;
          font-size: $base-font-size;
        }
      }
    }

    @if $layout-sidebar-include-footer {
      #{$layout-sidebar-footer-block} {
        background: $layout-sidebar-nav-title-background-color;
        bottom: 0;
        color: $layout-sidebar-nav-link-text-color;
        height: $layout-sidebar-footer-height;
        left: 0;
        line-height: $layout-sidebar-footer-height;
        position: absolute;
        right: 0;
      }
    }

    &.collapsed {
      width: $layout-sidebar-nav-width-collapsed;

      > nav > ul a {
        > i {
          margin-right: 0;
        }

        > span {
          display: none;
        }
      }

      header {
        h1 {
          display: none;
        }

        .toggle-collapse {
          float: none;

          button {
            @include icon(chevron-circle-right);

            width: $layout-sidebar-nav-link-icon-width;
          }
        }
      }

      @if $layout-sidebar-include-footer {
        #{$layout-sidebar-footer-block} {
        }
      }
    }
  }
}

@mixin layout {
  html, body {
    height: 100%;
    overflow: hidden;
  }

  #{$layout-main-block} {
    height: 100%;

    > #{$layout-content-wrapper-block} {
      height: 100%;
      overflow: hidden;
      position: relative;

      > #{$layout-content-block} {
        height: 100%;
        overflow-y: auto;
      }
    }
  }
}

@include exports("paint-layout") {
  @if $include-html-paint-layout {
    @include layout;
    @include layout-sidebar;
  }
}
